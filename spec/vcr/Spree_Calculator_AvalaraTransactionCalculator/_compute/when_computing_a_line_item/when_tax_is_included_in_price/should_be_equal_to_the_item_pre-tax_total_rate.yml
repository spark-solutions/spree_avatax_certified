---
http_interactions:
- request:
    method: post
    uri: https://development.avalara.net/1.0/tax/get
    body:
      encoding: UTF-8
      string: '{"DocCode":"R415524908","DocDate":"2018-05-27","Discount":"0.0","Commit":false,"DocType":"SalesOrder","Addresses":[{"AddressCode":"Orig","Line1":"9529
        Vernon Court","Line2":"","City":"New York","Region":"New York","PostalCode":"10027","Country":"United
        States"},{"AddressCode":"Dest","Line1":"9529 Vernon Court","Line2":"","City":"New
        York","Region":"New York","Country":"US","PostalCode":"10027"}],"Lines":[{"LineNo":"2-LI","Description":"Product
        #2 - 7431","TaxCode":"PC040000","ItemCode":"SKU-2","Qty":1,"Amount":10.0,"OriginCode":"Orig","DestinationCode":"Dest","CustomerUsageType":null,"Discounted":false,"TaxIncluded":true}],"CustomerCode":2,"CompanyCode":"test_company","CustomerUsageType":null,"ExemptionNo":null,"Client":"a0o33000004FH8l","ReferenceCode":"R415524908","DetailLevel":"Tax","CurrencyCode":"USD"}'
    headers:
      Content-Type:
      - application/json
      Authorization:
      - Basic dGVzdF9hY2NvdW50OnRlc3RfbGljZW5zZV9rZXk=
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
      User-Agent:
      - Ruby
  response:
    status:
      code: 200
      message: OK
    headers:
      Date:
      - Sun, 27 May 2018 14:30:45 GMT
      Content-Type:
      - text/json; charset=utf-8
      Content-Length:
      - '719'
      Connection:
      - keep-alive
      Cache-Control:
      - private
      Vary:
      - Accept-Encoding
      X-Aspnet-Version:
      - 4.0.30319
      X-Powered-By:
      - ASP.NET
      Set-Cookie:
      - TS017f1821=01a8ddc44e52f93f47aeb1476a5e5b2899d3715c64cb2a90404c560077ff857497418b3f0c754324260cf5117a55dc0f638c103fd5;
        Path=/
    body:
      encoding: ASCII-8BIT
      string: |
        {
        "ResultCode": "Success",
        "DocCode": "R415524908",
        "DocDate": "2018-05-27",
        "Timestamp": "2018-05-27T14:30:45.0007176Z",
        "TotalAmount": "9.18",
        "TotalDiscount": "0",
        "TotalExemption": "0",
        "TotalTaxable": "9.18",
        "TotalTax": "0.82",
        "TotalTaxCalculated": "0.82",
        "TaxLines": [
        {
        "LineNo": "2-LI",
        "TaxCode": "PC040000",
        "Taxability": "true",
        "BoundaryLevel": "Zip5",
        "Exemption": "0",
        "Discount": "0",
        "Taxable": "9.18",
        "Rate": "0.088750",
        "Tax": "0.82",
        "TaxCalculated": "0.82",
        "TaxDetails": [
        {
        "Country": "US",
        "Region": "NY",
        "JurisType": "State",
        "JurisCode": "36",
        "Taxable": "9.18",
        "Rate": "0.040000",
        "Tax": "0.37",
        "JurisName": "NEW YORK",
        "TaxName": "NY STATE TAX"}
        ,{
        "Country": "US",
        "Region": "NY",
        "JurisType": "City",
        "JurisCode": "51000",
        "Taxable": "9.18",
        "Rate": "0.045000",
        "Tax": "0.41",
        "JurisName": "NEW YORK CITY",
        "TaxName": "NY CITY TAX"}
        ,{
        "Country": "US",
        "Region": "NY",
        "JurisType": "Special",
        "JurisCode": "359071",
        "Taxable": "9.18",
        "Rate": "0.003750",
        "Tax": "0.04",
        "JurisName": "METROPOLITAN COMMUTER TRANSPORTATION DISTRICT",
        "TaxName": "NY SPECIAL TAX"}
        ]
        }
        ]
        ,
        "TaxAddresses": [
        {
        "Address": "9529 Vernon Court",
        "AddressCode": "Dest",
        "City": "New York",
        "Country": "US",
        "PostalCode": "10027",
        "Region": "NY",
        "TaxRegionId": "2088629",
        "JurisCode": "3600051000"}
        ,{
        "Address": "9529 Vernon Court",
        "AddressCode": "Orig",
        "City": "New York",
        "Country": "US",
        "PostalCode": "10027",
        "Region": "NY",
        "TaxRegionId": "2088629",
        "JurisCode": "3600051000"}
        ]
        ,
        "TaxDate": "2018-05-27"}
    http_version:
  recorded_at: Sun, 27 May 2018 14:30:57 GMT
- request:
    method: post
    uri: https://development.avalara.net/1.0/tax/get
    body:
      encoding: UTF-8
      string: '{"DocCode":"R415524908","DocDate":"2018-05-27","Discount":"0.0","Commit":false,"DocType":"SalesOrder","Addresses":[{"AddressCode":"Orig","Line1":"9529
        Vernon Court","Line2":"","City":"New York","Region":"New York","PostalCode":"10027","Country":"United
        States"},{"AddressCode":"Dest","Line1":"9529 Vernon Court","Line2":"","City":"New
        York","Region":"New York","Country":"US","PostalCode":"10027"},{"AddressCode":"4","Line1":"1600
        Pennsylvania Ave NW","Line2":null,"City":"Washington","PostalCode":"20500","Country":"US"}],"Lines":[{"LineNo":"2-LI","Description":"Product
        #2 - 7431","TaxCode":"PC040000","ItemCode":"SKU-2","Qty":1,"Amount":10.0,"OriginCode":"4","DestinationCode":"Dest","CustomerUsageType":null,"Discounted":false,"TaxIncluded":true},{"LineNo":"2-FR","ItemCode":"Avalara
        Ground","Qty":1,"Amount":100.0,"OriginCode":"4","DestinationCode":"Dest","CustomerUsageType":null,"Description":"Shipping
        Charge","TaxCode":"FR000000","Discounted":false,"TaxIncluded":true}],"CustomerCode":2,"CompanyCode":"test_company","CustomerUsageType":null,"ExemptionNo":null,"Client":"a0o33000004FH8l","ReferenceCode":"R415524908","DetailLevel":"Tax","CurrencyCode":"USD"}'
    headers:
      Content-Type:
      - application/json
      Authorization:
      - Basic dGVzdF9hY2NvdW50OnRlc3RfbGljZW5zZV9rZXk=
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
      User-Agent:
      - Ruby
  response:
    status:
      code: 200
      message: OK
    headers:
      Date:
      - Sun, 27 May 2018 14:30:46 GMT
      Content-Type:
      - text/json; charset=utf-8
      Content-Length:
      - '882'
      Connection:
      - keep-alive
      Cache-Control:
      - private
      Vary:
      - Accept-Encoding
      X-Aspnet-Version:
      - 4.0.30319
      X-Powered-By:
      - ASP.NET
      Set-Cookie:
      - TS017f1821=01a8ddc44e51b035937fcdb0a778b401a288234b73c29e167accf5f1125582be0ea4571113bd414cb1f4f6ebdcd54f9aaac2657818;
        Path=/
    body:
      encoding: ASCII-8BIT
      string: |
        {
        "ResultCode": "Success",
        "DocCode": "R415524908",
        "DocDate": "2018-05-27",
        "Timestamp": "2018-05-27T14:30:46.5803135Z",
        "TotalAmount": "101.03",
        "TotalDiscount": "0",
        "TotalExemption": "0",
        "TotalTaxable": "101.03",
        "TotalTax": "8.97",
        "TotalTaxCalculated": "8.97",
        "TaxLines": [
        {
        "LineNo": "2-LI",
        "TaxCode": "PC040000",
        "Taxability": "true",
        "BoundaryLevel": "Zip5",
        "Exemption": "0",
        "Discount": "0",
        "Taxable": "9.18",
        "Rate": "0.088750",
        "Tax": "0.82",
        "TaxCalculated": "0.82",
        "TaxDetails": [
        {
        "Country": "US",
        "Region": "NY",
        "JurisType": "State",
        "JurisCode": "36",
        "Taxable": "9.18",
        "Rate": "0.040000",
        "Tax": "0.37",
        "JurisName": "NEW YORK",
        "TaxName": "NY STATE TAX"}
        ,{
        "Country": "US",
        "Region": "NY",
        "JurisType": "City",
        "JurisCode": "51000",
        "Taxable": "9.18",
        "Rate": "0.045000",
        "Tax": "0.41",
        "JurisName": "NEW YORK CITY",
        "TaxName": "NY CITY TAX"}
        ,{
        "Country": "US",
        "Region": "NY",
        "JurisType": "Special",
        "JurisCode": "359071",
        "Taxable": "9.18",
        "Rate": "0.003750",
        "Tax": "0.04",
        "JurisName": "METROPOLITAN COMMUTER TRANSPORTATION DISTRICT",
        "TaxName": "NY SPECIAL TAX"}
        ]
        }
        ,{
        "LineNo": "2-FR",
        "TaxCode": "FR000000",
        "Taxability": "true",
        "BoundaryLevel": "Zip5",
        "Exemption": "0",
        "Discount": "0",
        "Taxable": "91.85",
        "Rate": "0.088750",
        "Tax": "8.15",
        "TaxCalculated": "8.15",
        "TaxDetails": [
        {
        "Country": "US",
        "Region": "NY",
        "JurisType": "State",
        "JurisCode": "36",
        "Taxable": "91.85",
        "Rate": "0.040000",
        "Tax": "3.67",
        "JurisName": "NEW YORK",
        "TaxName": "NY STATE TAX"}
        ,{
        "Country": "US",
        "Region": "NY",
        "JurisType": "City",
        "JurisCode": "51000",
        "Taxable": "91.85",
        "Rate": "0.045000",
        "Tax": "4.13",
        "JurisName": "NEW YORK CITY",
        "TaxName": "NY CITY TAX"}
        ,{
        "Country": "US",
        "Region": "NY",
        "JurisType": "Special",
        "JurisCode": "359071",
        "Taxable": "91.85",
        "Rate": "0.003750",
        "Tax": "0.35",
        "JurisName": "METROPOLITAN COMMUTER TRANSPORTATION DISTRICT",
        "TaxName": "NY SPECIAL TAX"}
        ]
        }
        ]
        ,
        "TaxAddresses": [
        {
        "Address": "9529 Vernon Court",
        "AddressCode": "Dest",
        "City": "New York",
        "Country": "US",
        "PostalCode": "10027",
        "Region": "NY",
        "TaxRegionId": "2088629",
        "JurisCode": "3600051000"}
        ,{
        "Address": "1600 Pennsylvania Ave NW",
        "AddressCode": "4",
        "City": "Washington",
        "Country": "US",
        "PostalCode": "20500",
        "Region": "DC",
        "TaxRegionId": "949",
        "JurisCode": "1100000000"}
        ]
        ,
        "TaxDate": "2018-05-27"}
    http_version:
  recorded_at: Sun, 27 May 2018 14:30:58 GMT
recorded_with: VCR 4.0.0
